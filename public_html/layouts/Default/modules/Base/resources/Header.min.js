
jQuery.Class("Base_Header_Js",{quickCreateModuleCache:{},self:false,getInstance:function(){if(this.self!=false){return this.self}this.self=new Base_Header_Js();return this.self}},{recentPageViews:function(){var h=this;var c=20;var b="";var v="javascript:void();";var w="yf_history_portal_";var f=localStorage.getItem(w);if(f!=""&&f!=null){var o=f.toString().split("_|_");var r=o[o.length-1].toString().split("|");b=r[0];v=r[1]}var j='<ul class="dropdown-menu pull-right historyList" role="menu">';var u=new Date().getTime();var a=-1;var l=true;if(o!=null){for(var n=o.length-1;n>=0;n--){r=o[n].toString().split("|");var s=new Date();var g="";if(r[2]!=undefined){s.setTime(r[2]);var q=app.formatDateZ(s.getHours());var m=app.formatDateZ(s.getMinutes());if(l&&(a!=app.howManyDaysFromDate(s))){a=app.howManyDaysFromDate(s);if(a==0){j+='<li class="selectorHistory">'+app.translate("JS_TODAY")+"</li>"}else{if(a==1){j+='<li class="selectorHistory">'+app.translate("JS_YESTERDAY")+"</li>"}else{j+='<li class="selectorHistory">'+app.translate("JS_OLDER")+"</li>";l=false}}}if(l){g='<span class="historyHour">'+q+":"+m+"</span> | "}else{g=app.formatDate(s)+" | "}}var p=$("#userDateFormat").val()+""+$("#userDateFormat").val();j+='<li><a href="'+r[1]+'">'+g+r[0]+"</a></li>"}var k=this.getHistoryLabel();if(k.length>1&&document.URL!=v){o.push(this.getHistoryLabel()+"|"+document.URL+"|"+u)}if(o.length>=c){o.splice(0,1)}localStorage.setItem(w,o.join("_|_"))}else{var e=new Array();var k=this.getHistoryLabel();if(k.length>1){e.push(this.getHistoryLabel()+"|"+document.URL+"|"+u);localStorage.setItem(w,e.join("_|_"))}}j+='<li class="divider"></li><li><a class="clearHistory" href="#">'+app.translate("JS_CLEAR_HISTORY")+"</a></li>";j+="</ul>";$(".showHistoryBtn").after(j);this.registerClearHistory()},getHistoryLabel:function(){var a="";$(".breadcrumbsLinks span").each(function(b){a+=$(this).text()});return a},registerClearHistory:function(){$(".historyBtn .clearHistory").click(function(){var a="yf_history_portal_";localStorage.removeItem(a);var b='<li class="divider"></li><li><a class="clearHistory" href="#">'+app.translate("JS_CLEAR_HISTORY")+"</a></li>";$(".historyBtn .dropdown-menu").html(b)})},registerChangeCompany:function(){$(".selectCompanies").click(function(){$("#modalSelectCompanies").on("show.bs.modal",function(a){var b=$(a.target);b.find("select").addClass("select2");app.showSelect2Element(b);b.find(".btn-primary").click(function(){AppConnector.request({module:app.getModuleName(),action:"ChangeCompany",record:b.find("#companyId").val()}).then(function(c){window.location.href="index.php"},function(d,c){console.log([d,c])})})}).modal()})},registerEvents:function(){var a=this;a.recentPageViews();a.registerMobileEvents();a.registerChangeCompany()},registerMobileEvents:function(){var a=this;$(".rightHeaderBtnMenu").click(function(){$(".mobileLeftPanel").toggleClass("showMainMenu");$(".actionMenu").removeClass("showActionMenu");$(".searchMenu").removeClass("showSearchMenu")});$(".actionMenuBtn ").click(function(){$(".actionMenu").toggleClass("showActionMenu");$(".mobileLeftPanel").removeClass("showMainMenu");$(".searchMenu").removeClass("showSearchMenu")});$(".searchMenuBtn ").click(function(){$(".searchMenu").toggleClass("showSearchMenu");$(".mobileLeftPanel").removeClass("showMainMenu");$(".actionMenu").removeClass("showActionMenu")})},});jQuery(document).ready(function(){Base_Header_Js.getInstance().registerEvents()});